<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 6 CV | Untitled</title>
  <meta name="description" content="<p>This is a minimal example of using the bookdown package to write a book.
The HTML output format for this example is bookdown::gitbook,
set in the _output.yml file.</p>" />
  <meta name="generator" content="bookdown 0.34 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 6 CV | Untitled" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="<p>This is a minimal example of using the bookdown package to write a book.
The HTML output format for this example is bookdown::gitbook,
set in the _output.yml file.</p>" />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 6 CV | Untitled" />
  
  <meta name="twitter:description" content="<p>This is a minimal example of using the bookdown package to write a book.
The HTML output format for this example is bookdown::gitbook,
set in the _output.yml file.</p>" />
  

<meta name="author" content="John Doe" />


<meta name="date" content="2023-06-06" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="introduction-projecticum.html"/>
<link rel="next" href="params.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>
<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">A Minimal Book Example</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Welcome</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#preview-book"><i class="fa fa-check"></i><b>1.1</b> Preview book</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="ic50-c.elegans-experiment-workflow.html"><a href="ic50-c.elegans-experiment-workflow.html"><i class="fa fa-check"></i><b>2</b> IC50 C.elegans experiment workflow</a></li>
<li class="chapter" data-level="3" data-path="map-tree.html"><a href="map-tree.html"><i class="fa fa-check"></i><b>3</b> map tree</a></li>
<li class="chapter" data-level="4" data-path="the-importance-of-reproducible-data..html"><a href="the-importance-of-reproducible-data..html"><i class="fa fa-check"></i><b>4</b> The importance of reproducible data.</a>
<ul>
<li class="chapter" data-level="4.0.1" data-path="the-importance-of-reproducible-data..html"><a href="the-importance-of-reproducible-data..html#the-second-part-of-data"><i class="fa fa-check"></i><b>4.0.1</b> the second part of data</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="introduction-projecticum.html"><a href="introduction-projecticum.html"><i class="fa fa-check"></i><b>5</b> introduction projecticum</a></li>
<li class="chapter" data-level="6" data-path="cv.html"><a href="cv.html"><i class="fa fa-check"></i><b>6</b> CV</a>
<ul>
<li class="chapter" data-level="6.1" data-path="cv.html"><a href="cv.html#connecting-and-using-an-external-database"><i class="fa fa-check"></i><b>6.1</b> connecting and using an external database</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="params.html"><a href="params.html"><i class="fa fa-check"></i><b>7</b> Params</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Untitled</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="cv" class="section level1 hasAnchor" number="6">
<h1><span class="header-section-number">Chapter 6</span> CV<a href="cv.html#cv" class="anchor-section" aria-label="Anchor link to header"></a></h1>

<div id="connecting-and-using-an-external-database" class="section level2 hasAnchor" number="6.1">
<h2><span class="header-section-number">6.1</span> connecting and using an external database<a href="cv.html#connecting-and-using-an-external-database" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>In this chapter I am going to show I used a external database (DBeaver) to store and process files.
For this chapter we use the gapminder data of the dslabs package and the data from google about flu and dengue searches per country.</p>
<p>firstly we load the flu dengue data from the repo and the gapminder data into data frames. the searches data contains a header which is needed to be skip.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="cv.html#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dslabs)</span>
<span id="cb28-2"><a href="cv.html#cb28-2" aria-hidden="true" tabindex="-1"></a>Flu_data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;~/Rschool/Berrit-Github.github.io/data/flu_data.csv&quot;</span>, <span class="at">skip =</span> <span class="dv">11</span>)</span>
<span id="cb28-3"><a href="cv.html#cb28-3" aria-hidden="true" tabindex="-1"></a>Flu_data <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(Flu_data)</span>
<span id="cb28-4"><a href="cv.html#cb28-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-5"><a href="cv.html#cb28-5" aria-hidden="true" tabindex="-1"></a>dengue_data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;~/Rschool/Berrit-Github.github.io/data/dengue_data.csv&quot;</span>, <span class="at">skip =</span> <span class="dv">11</span>)</span>
<span id="cb28-6"><a href="cv.html#cb28-6" aria-hidden="true" tabindex="-1"></a>dengue_data <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(dengue_data)</span>
<span id="cb28-7"><a href="cv.html#cb28-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-8"><a href="cv.html#cb28-8" aria-hidden="true" tabindex="-1"></a>gapminder <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(gapminder)  </span></code></pre></div>
<p>Next we use R to tidy up the data a bit and make it compatible with each other. We do not yet make it tidy data this will come later.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="cv.html#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb29-2"><a href="cv.html#cb29-2" aria-hidden="true" tabindex="-1"></a>Flu_data_tidy <span class="ot">&lt;-</span> Flu_data <span class="sc">%&gt;%</span> <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="sc">-</span><span class="fu">c</span>(Date) , <span class="at">names_to =</span> <span class="st">&quot;country&quot;</span> , <span class="at">values_to =</span> <span class="st">&quot;Weekly_searches&quot;</span>)</span>
<span id="cb29-3"><a href="cv.html#cb29-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-4"><a href="cv.html#cb29-4" aria-hidden="true" tabindex="-1"></a>dengue_data_tidy <span class="ot">&lt;-</span> dengue_data <span class="sc">%&gt;%</span> <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="sc">-</span><span class="fu">c</span>(Date) , <span class="at">names_to =</span> <span class="st">&quot;country&quot;</span> , <span class="at">values_to =</span> <span class="st">&quot;Weekly_searches&quot;</span>)</span>
<span id="cb29-5"><a href="cv.html#cb29-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-6"><a href="cv.html#cb29-6" aria-hidden="true" tabindex="-1"></a>gapminder <span class="ot">&lt;-</span> gapminder <span class="sc">%&gt;%</span> <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="sc">-</span><span class="fu">c</span>(country , year, continent , region) , <span class="at">names_to =</span> <span class="st">&quot;variable&quot;</span> , <span class="at">values_to =</span> <span class="st">&quot;values&quot;</span>)</span></code></pre></div>
<p>we change the data from the flu and dengue data so it works with the gapminder data
we do this by combining the data of the “Date” into “years”</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="cv.html#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb30-2"><a href="cv.html#cb30-2" aria-hidden="true" tabindex="-1"></a>Flu_data_tidy<span class="sc">$</span>Date <span class="ot">&lt;-</span> Flu_data_tidy<span class="sc">$</span>Date <span class="sc">%&gt;%</span> <span class="fu">str_sub</span>(<span class="dv">1</span> ,<span class="dv">4</span>)</span>
<span id="cb30-3"><a href="cv.html#cb30-3" aria-hidden="true" tabindex="-1"></a>dengue_data_tidy<span class="sc">$</span>Date <span class="ot">&lt;-</span> dengue_data_tidy<span class="sc">$</span>Date <span class="sc">%&gt;%</span> <span class="fu">str_sub</span>(<span class="dv">1</span> ,<span class="dv">4</span>)</span>
<span id="cb30-4"><a href="cv.html#cb30-4" aria-hidden="true" tabindex="-1"></a>Flu_data_tidy <span class="ot">&lt;-</span> <span class="fu">rename</span>(Flu_data_tidy , <span class="st">&quot;year&quot;</span> <span class="ot">=</span> <span class="st">&quot;Date&quot;</span>)</span>
<span id="cb30-5"><a href="cv.html#cb30-5" aria-hidden="true" tabindex="-1"></a>dengue_data_tidy <span class="ot">&lt;-</span> <span class="fu">rename</span>(dengue_data_tidy , <span class="st">&quot;year&quot;</span> <span class="ot">=</span> <span class="st">&quot;Date&quot;</span>)</span>
<span id="cb30-6"><a href="cv.html#cb30-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-7"><a href="cv.html#cb30-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-8"><a href="cv.html#cb30-8" aria-hidden="true" tabindex="-1"></a>Flu_data_tidy <span class="ot">&lt;-</span> Flu_data_tidy <span class="sc">%&gt;%</span></span>
<span id="cb30-9"><a href="cv.html#cb30-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(country, year) <span class="sc">%&gt;%</span></span>
<span id="cb30-10"><a href="cv.html#cb30-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">flu_searches =</span> <span class="fu">sum</span>(Weekly_searches))</span></code></pre></div>
<pre><code>## `summarise()` has grouped output by
## &#39;country&#39;. You can override using the
## `.groups` argument.</code></pre>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="cv.html#cb32-1" aria-hidden="true" tabindex="-1"></a>dengue_data_tidy <span class="ot">&lt;-</span> dengue_data_tidy <span class="sc">%&gt;%</span></span>
<span id="cb32-2"><a href="cv.html#cb32-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(country, year) <span class="sc">%&gt;%</span></span>
<span id="cb32-3"><a href="cv.html#cb32-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">dengue_searches =</span> <span class="fu">sum</span>(Weekly_searches))</span></code></pre></div>
<pre><code>## `summarise()` has grouped output by
## &#39;country&#39;. You can override using the
## `.groups` argument.</code></pre>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="cv.html#cb34-1" aria-hidden="true" tabindex="-1"></a>dengue_data_tidy<span class="sc">$</span>year <span class="ot">&lt;-</span> dengue_data_tidy<span class="sc">$</span>year <span class="sc">%&gt;%</span> <span class="fu">as.numeric</span>()</span>
<span id="cb34-2"><a href="cv.html#cb34-2" aria-hidden="true" tabindex="-1"></a>dengue_data_tidy[<span class="fu">is.na</span>(dengue_data_tidy)] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb34-3"><a href="cv.html#cb34-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-4"><a href="cv.html#cb34-4" aria-hidden="true" tabindex="-1"></a>Flu_data_tidy<span class="sc">$</span>year <span class="ot">&lt;-</span> Flu_data_tidy<span class="sc">$</span>year <span class="sc">%&gt;%</span> <span class="fu">as.numeric</span>()</span>
<span id="cb34-5"><a href="cv.html#cb34-5" aria-hidden="true" tabindex="-1"></a>Flu_data_tidy[<span class="fu">is.na</span>(Flu_data_tidy)] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb34-6"><a href="cv.html#cb34-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-7"><a href="cv.html#cb34-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-8"><a href="cv.html#cb34-8" aria-hidden="true" tabindex="-1"></a>gapminder<span class="sc">$</span>country <span class="ot">&lt;-</span> <span class="fu">as.character</span>(gapminder<span class="sc">$</span>country)</span>
<span id="cb34-9"><a href="cv.html#cb34-9" aria-hidden="true" tabindex="-1"></a>gapminder<span class="sc">$</span>year <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(gapminder<span class="sc">$</span>year)</span>
<span id="cb34-10"><a href="cv.html#cb34-10" aria-hidden="true" tabindex="-1"></a>gapminder[<span class="fu">is.na</span>(gapminder)] <span class="ot">&lt;-</span> <span class="dv">0</span></span></code></pre></div>
<p>now that the data is tidy and works with each other we write them back to a new map.</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="cv.html#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(Flu_data_tidy ,  <span class="st">&quot;C:/Users/Dell/Documents/Rschool/dsfb2_workflows_portfolio/portfolio_opdracht7/Flu_data_tidy.csv&quot;</span> , <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span>
<span id="cb35-2"><a href="cv.html#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(dengue_data_tidy ,<span class="st">&quot;C:/Users/Dell/Documents/Rschool/dsfb2_workflows_portfolio/portfolio_opdracht7/dengue_data_tidy.csv&quot;</span> ,<span class="at">row.names =</span> <span class="cn">FALSE</span>)</span>
<span id="cb35-3"><a href="cv.html#cb35-3" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(gapminder ,<span class="st">&quot;C:/Users/Dell/Documents/Rschool/dsfb2_workflows_portfolio/portfolio_opdracht7/gapminder_data_tidy.csv&quot;</span> , <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span>
<span id="cb35-4"><a href="cv.html#cb35-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-5"><a href="cv.html#cb35-5" aria-hidden="true" tabindex="-1"></a><span class="fu">write_rds</span>(Flu_data_tidy ,  <span class="st">&quot;C:/Users/Dell/Documents/Rschool/dsfb2_workflows_portfolio/portfolio_opdracht7/Flu_data_tidy.rds&quot;</span>)</span>
<span id="cb35-6"><a href="cv.html#cb35-6" aria-hidden="true" tabindex="-1"></a><span class="fu">write_rds</span>(dengue_data_tidy ,<span class="st">&quot;C:/Users/Dell/Documents/Rschool/dsfb2_workflows_portfolio/portfolio_opdracht7/dengue_data_tidy.rds&quot;</span>)</span>
<span id="cb35-7"><a href="cv.html#cb35-7" aria-hidden="true" tabindex="-1"></a><span class="fu">write_rds</span>(gapminder ,<span class="st">&quot;C:/Users/Dell/Documents/Rschool/dsfb2_workflows_portfolio/portfolio_opdracht7/gapminder_data_tidy.rds&quot;</span>)</span></code></pre></div>
<p>Next we are going to connect to the server and save the data there we use DBeaver for this.</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="cv.html#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(RPostgreSQL)</span>
<span id="cb36-2"><a href="cv.html#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(devtools)</span>
<span id="cb36-3"><a href="cv.html#cb36-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(remotes)</span>
<span id="cb36-4"><a href="cv.html#cb36-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(RPostgres)</span>
<span id="cb36-5"><a href="cv.html#cb36-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DBI)</span>
<span id="cb36-6"><a href="cv.html#cb36-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-7"><a href="cv.html#cb36-7" aria-hidden="true" tabindex="-1"></a> <span class="fu">dbWriteTable</span>(con, <span class="st">&quot;flu_data&quot;</span>, Flu_data_tidy)</span>
<span id="cb36-8"><a href="cv.html#cb36-8" aria-hidden="true" tabindex="-1"></a> <span class="fu">dbWriteTable</span>(con, <span class="st">&quot;dengue_data&quot;</span>, dengue_data_tidy)</span>
<span id="cb36-9"><a href="cv.html#cb36-9" aria-hidden="true" tabindex="-1"></a> <span class="fu">dbWriteTable</span>(con, <span class="st">&quot;gap_data&quot;</span>, gapminder , <span class="at">overwrite =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p>After we have saved the data into the data base we can see out newly made databases in DBeaver we can check t contents of these dataframes with SQL code in dBeaver</p>
<p><img src="portfolio_opdracht7/dengue_flu_data_combined.PNG" alt="In this picture we combined the flu and dengue data in 1 table to see both searches at the same time" />
<img src="portfolio_opdracht7gap_data.PNG" alt="In this figure we can see all the colums that are in the gap_data table" /></p>
<p>next we are going to combine all three sets in one big table by using the connection command in the header we are connected to our data base in DBeaver. we use SQL language in rstudio to make the changes.</p>
<div class="figure">
<img src="data/SQL_join_tables.PNG" alt="" />
<p class="caption">In this figure we can see all the colums that are in the gap_data table</p>
</div>
<p>Now that we combined the data into a new table we call this back to R using the con vector to connect to the database while coding in R language.
after pulling back the data we can also pivot the data to make it tidy this will make it easier to work with while plotting.</p>
<p>to get an idea of the data we can use summary to tell us statistics such as mean or sd. for example the average amount of flu searches in 2013 was
1.9229923^{4} (r summary(filter(all_data, year == 2013 )flu_searches)[4] )</p>
<p>and the amount of dengue searches was</p>
<p>8.8201(summary(filter(all_data, year == 2013 )dengue_searches)[4])</p>
<p>first it would be interesting to see which country searches flu and dengue the most to make this more even we will be looking at the amount of searches per 100 citizens the dengue searches were lower and we need look for searches per 1.000.000 citizens.</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="cv.html#cb37-1" aria-hidden="true" tabindex="-1"></a>all_data <span class="ot">&lt;-</span> <span class="fu">dbReadTable</span>(con, <span class="st">&quot;all_data&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="cv.html#cb38-1" aria-hidden="true" tabindex="-1"></a>all_data_2 <span class="ot">&lt;-</span> all_data[, <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">7</span>, <span class="dv">10</span> , <span class="dv">11</span>)]</span>
<span id="cb38-2"><a href="cv.html#cb38-2" aria-hidden="true" tabindex="-1"></a>all_data_2 <span class="ot">&lt;-</span> <span class="fu">pivot_longer</span>(all_data_2, <span class="at">cols =</span> <span class="sc">-</span><span class="fu">c</span>(country , year), <span class="at">values_to =</span> <span class="st">&quot;values&quot;</span> , <span class="at">names_to =</span> <span class="st">&quot;variable&quot;</span>)</span>
<span id="cb38-3"><a href="cv.html#cb38-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-4"><a href="cv.html#cb38-4" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(all_data , flu_searches <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(country <span class="sc">==</span> <span class="st">&quot;Austria&quot;</span> <span class="sc">|</span> country <span class="sc">==</span> <span class="st">&quot;Bulgaria&quot;</span> <span class="sc">|</span> country <span class="sc">==</span> <span class="st">&quot;Canada&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>( <span class="fu">aes</span>(<span class="at">x =</span> year , <span class="at">y =</span> (flu_searches<span class="sc">/</span>population)<span class="sc">*</span><span class="dv">1000</span> , <span class="at">group =</span> country , <span class="at">colour =</span> country, <span class="at">label =</span> country)) <span class="sc">+</span><span class="fu">geom_point</span>() <span class="sc">+</span> <span class="fu">geom_line</span>() <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">&quot;amount of flu searches per 1000&quot;</span>) </span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-16-1.png" width="672" /></p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="cv.html#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(all_data , dengue_searches <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>( <span class="fu">aes</span>(<span class="at">x =</span> year , <span class="at">y =</span> (dengue_searches<span class="sc">/</span>population)<span class="sc">*</span><span class="dv">10000000</span>, <span class="at">group =</span> country , <span class="at">colour =</span> country)) <span class="sc">+</span><span class="fu">geom_point</span>() <span class="sc">+</span> <span class="fu">geom_line</span>() <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">&quot;amount of dengue searches per 10.000.000&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-16-2.png" width="672" />
this .. and this country searched flu the most</p>
<p>lastly we wanted to see which regions googles flu the most the most the most. to see if there is any connection between place and the searches.</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="cv.html#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(all_data , flu_searches <span class="sc">&gt;</span> <span class="dv">0</span> <span class="sc">&amp;</span> gdp <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>( <span class="fu">aes</span>(<span class="at">x =</span> region , <span class="at">y =</span> (flu_searches<span class="sc">/</span>population)<span class="sc">*</span><span class="dv">100</span>, <span class="at">group =</span> country , <span class="at">fill =</span> region)) <span class="sc">+</span> <span class="fu">geom_col</span>() <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">&quot;amount of flu_serches&quot;</span>) <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">axis.text.x=</span><span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="fl">0.75</span>))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-17-1.png" width="672" /></p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="introduction-projecticum.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="params.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/USERNAME/REPO/edit/BRANCH/06_cv_include_code.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf", "_main.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
